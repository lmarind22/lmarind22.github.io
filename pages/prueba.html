<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación de la Ley de Snell con Colores de Medios</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        .canvas-container {
            position: relative;
            width: 600px;
            height: 400px;
            margin: 20px auto;
            border: 2px solid #333;
        }
        #snellCanvas {
            width: 100%;
            height: 100%;
        }
        #controls {
            margin-top: 20px;
        }
        label {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <h1>Simulación de la Ley de Snell</h1>
    <div id="controls">
        <label for="n1">Índice de refracción del medio 1 (n1):</label>
        <input type="number" id="n1" value="1" min="1" step="0.01" onchange="simularLeySnell()"><br><br>
        <label for="n2">Índice de refracción del medio 2 (n2):</label>
        <input type="number" id="n2" value="1.5" min="1" step="0.01" onchange="simularLeySnell()"><br><br>
        <label for="angulo">Ángulo de incidencia (°):</label>
        <input type="range" id="angulo" value="30" min="0" max="90" step="1" oninput="simularLeySnell()">
        <span id="angulo-value">30°</span><br><br>
    </div>

    <div class="canvas-container">
        <canvas id="snellCanvas" width="600" height="400"></canvas>
    </div>

    <script>
        function simularLeySnell() {
            const n1 = parseFloat(document.getElementById('n1').value);
            const n2 = parseFloat(document.getElementById('n2').value);
            const anguloIncidencia = parseFloat(document.getElementById('angulo').value);

            // Actualizar el texto del ángulo
            document.getElementById('angulo-value').textContent = `${anguloIncidencia}°`;

            const radianesIncidencia = anguloIncidencia * Math.PI / 180; // Convertir a radianes
            const senoRefraccion = (n1 / n2) * Math.sin(radianesIncidencia);

            // Comprobación para ver si hay reflexión interna total
            if (senoRefraccion > 1) {
                dibujarSimulacion(n1, n2, anguloIncidencia, null);
                return;
            }

            const anguloRefraccion = Math.asin(senoRefraccion) * (180 / Math.PI); // Convertir a grados
            dibujarSimulacion(n1, n2, anguloIncidencia, anguloRefraccion);
        }

        function obtenerColorMedio(n) {
            // Determinar el color en función del índice de refracción (n)
            if (n <= 1) return '#b3e5fc'; // Azul claro para aire o vacío (n cercano a 1)
            else if (n <= 1.33) return '#81d4fa'; // Azul para agua (n típico 1.33)
            else if (n <= 1.5) return '#4fc3f7'; // Azul más oscuro para vidrio (n típico 1.5)
            else if (n <= 2.42) return '#0288d1'; // Azul profundo para diamante (n típico 2.42)
            else return '#01579b'; // Azul muy oscuro para índices mayores
        }

        function dibujarSimulacion(n1, n2, anguloIncidencia, anguloRefraccion) {
            const canvas = document.getElementById('snellCanvas');
            const ctx = canvas.getContext('2d');

            // Limpiar el canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Obtener colores para los medios en función de sus índices de refracción
            const colorMedio1 = obtenerColorMedio(n1);
            const colorMedio2 = obtenerColorMedio(n2);

            // Dibujar los medios con colores diferentes
            ctx.fillStyle = colorMedio1;
            ctx.fillRect(0, 0, canvas.width, canvas.height / 2);

            ctx.fillStyle = colorMedio2;
            ctx.fillRect(0, canvas.height / 2, canvas.width, canvas.height / 2);

            // Dibujar la línea de separación de los medios
            ctx.beginPath();
            ctx.moveTo(0, canvas.height / 2);
            ctx.lineTo(canvas.width, canvas.height / 2);
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Dibujar el rayo incidente
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, canvas.height / 2);
            const xIncidencia = canvas.width / 2 - (canvas.height / 2) * Math.tan(anguloIncidencia * Math.PI / 180);
            ctx.lineTo(xIncidencia, 0);
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Dibujar el rayo refractado o reflejado
            if (anguloRefraccion !== null) {
                // Rayo refractado
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                const xRefraccion = canvas.width / 2 + (canvas.height / 2) * Math.tan(anguloRefraccion * Math.PI / 180);
                ctx.lineTo(xRefraccion, canvas.height);
                ctx.strokeStyle = 'blue';
                ctx.lineWidth = 2;
                ctx.stroke();
            } else {
                // Rayo reflejado internamente
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                const xReflexion = canvas.width / 2 - (canvas.height / 2) * Math.tan(anguloIncidencia * Math.PI / 180);
                ctx.lineTo(xReflexion, canvas.height);
                ctx.strokeStyle = 'green';
                ctx.lineWidth = 2;
                ctx.stroke();
            }

            // Etiquetas de los ángulos
            ctx.fillStyle = 'black';
            ctx.font = '14px Arial';
            ctx.fillText(`Ángulo de Incidencia: ${anguloIncidencia.toFixed(2)}°`, 10, 20);
            if (anguloRefraccion !== null) {
                ctx.fillText(`Ángulo de Refracción: ${anguloRefraccion.toFixed(2)}°`, 10, 40);
            } else {
                ctx.fillText(`Reflexión Interna Total`, 10, 40);
            }
        }

        // Inicializar la simulación con valores por defecto
        simularLeySnell();
    </script>
</body>
</html>
